rdb-fullstack
=============

Common code for the Relational Databases and Full Stack Fundamentals courses

# Swiss Pairings Engine
A Python module for tournament management using [Swiss-system tournament management][1].

[1]:https://en.wikipedia.org/wiki/Swiss-system_tournament
## Install and Setup

### The easy way

Vagrant makes life easy if you wish to use the Swiss Pairings Engine.
If you have Vagrant and VirtualBox already setup.

1. `git clone https://github.com/justinvhester/vm-fullstack-nanodegree`
2. `cd vm-fullstack-nanodegree/vagrant/tournament`
3. `vagrantup`
  * Start the virtual machine. The first time may take longer than usual.
4. `vagrant ssh`
  * This will connect to a terminal on the virtual machine.
5. `cd /vagrant/tournament`
  * This directory contains the code for the tournament engine.
5. `psql tournament.sql`


### The hard way

1. Meet the dependencies
2. Place the two files in
  * To operate the engine you only need a pair of files from the `/vagrant/tournament` directory.

Because the code needed to operate the engine can be found in a pair of text files, you could (in theory) just copy those two files from '/vagrant/tournament' onto your system that meets the dependencies and requirements listed below.

#### Dependencies
-Python 2.6+
-Postgresql 9.0+
-`psql` command line tool
--A Database already setup to use credentials necessary for the tournament.sql file.

## Usage
Currently there is no GUI interface.
However the functions defined in tournament.py are usable from the python prompt.
```python
>>> from tournament import *
>>> countPlayers()
4L
>>>
```
This assumes you are in an ssh session with the VM 


## Known issues
### Rematches
Currently there is no restriction on rematches in the pairing algorithm.
The pairs are generated by going through the list of players ordered by number of wins.
So after two rounds of play, players with two wins will appear at the top of this list.
The `swissPairings()` function will simply pull the "next two" players off the top of the list.
In testing the function a rematch rarely happened in 4 and 8 player tournaments.
With 16 players or more a rematch would eventually occur due to the simplicity of the algorithm.
Some work has been accomplished to update the swissPairings() function to avoid a rematch pair.
Namely a compound key in the matches table and a new VIEW in `tournament.sql` that will provide a list of possible matches to check when generating the pairs. See the no-rematch feature branch for more details.

##Road Map
I would like to implement the following in no particular order.
* Prevent rematches
  * See no-rematch branch for current progress
* Give a 'bye' to the one left over player when there is an odd number of players
  * Prevent a single player from receiving more than one bye per tournament
* Break ties by calculating the strength of opponents defeated previously
  * Having beaten someone with more wins than your opponent should git you the edge
* Deal with drawn matches
* Deal with multiple games per match
* Generate Chess 960 starting positions
* Begin the work for a pybottle front end
  * Package it all up to run stand-alone on a system that meets the dependency requirements

